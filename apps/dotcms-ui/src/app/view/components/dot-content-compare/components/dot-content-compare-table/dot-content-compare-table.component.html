<p-table [value]='data.fields' *ngIf='data' autoLayout="true" styleClass="p-datatable-gridlines">
    <ng-template pTemplate='header'>
        <tr>
            <th> </th>
            <th>{{data.working?.title ? data.working?.title : data.working?.identifier}}</th>
            <th class="dot-content-compare-table__controls">
                <p-dropdown [options]="data.versions" (onChange)='version.emit($event.value)' >
                    <ng-template let-version pTemplate="selectedItem">
                        {{version.modDate | date: 'MM/dd/YYYY - HH:MM'}}
                    </ng-template>
                    <ng-template let-version pTemplate="item">
                        {{version.modDate | date: 'MM/dd/YYYY - HH:MM'}}
                    </ng-template>
                </p-dropdown>
                <p-selectButton
                    [options]="displayOptions"
                    [(ngModel)]="showDiff"
                    class="p-button-tabbed"
                    (onChange)="diff.emit($event.value)" >
                </p-selectButton>
            </th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-field >
        <tr [ngSwitch]="field?.fieldType" >

           <td>{{field.name}}</td>
            <ng-container *ngSwitchCase="'Image'">
               <td><img [src]="'/dA/'+data.working[field.variable]+'/250w/20q'"></td>
               <td><img [src]="'/dA/'+data.compare[field.variable]+'/250w/20q'"></td>
            </ng-container>
            <ng-container *ngSwitchCase="'File'">
                <td>
                    <span>{{data.working.identifier}}</span>
                    <button>{{data.working.identifier}}</button>
                </td>
                <td>
                    <span>{{data.compare.identifier}}</span>
                    <button p-button>{{data.compare.identifier}}</button>
                </td>
            </ng-container>
            <ng-container *ngSwitchCase="'Category'">
                <td>
                    {{data.working[field.variable] | json}}
                </td>
                <td [innerHTML]="showDiff ?
                ((data.working[field.variable] | json) | dotDiff:(data.compare[field.variable] | json))
                : data.compare[field.variable]" >
                </td>
            </ng-container>
            <ng-container *ngSwitchDefault>
                <td [innerHTML]="data.working[field.variable]"></td>
                <td [innerHTML]="showDiff ?
                (data.working[field.variable] | dotDiff:data.compare[field.variable])
                : data.compare[field.variable]" >
                </td>
            </ng-container>
        </tr>
    </ng-template>
</p-table>
