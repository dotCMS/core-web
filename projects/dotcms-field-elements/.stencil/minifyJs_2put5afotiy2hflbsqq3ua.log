import{h}from"../dotcmsfields.core.js";import{l as getStringFromDotKeyArray,m as isStringType}from"./chunk-62cd3eff.js";var DotFormFields={Text:function(e){return h("dot-textfield",{hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},"regex-check":e.regexCheck,required:e.required,value:e.defaultValue})},Textarea:function(e){return h("dot-textarea",{hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},"regex-check":e.regexCheck,required:e.required,value:e.defaultValue})},Checkbox:function(e){return h("dot-checkbox",{hint:e.hint,label:e.name,name:e.variable,options:e.values,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},"Multi-Select":function(e){return h("dot-multi-select",{hint:e.hint,label:e.name,name:e.variable,options:e.values,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},"Key-Value":function(e){return h("dot-key-value",{"field-type":e.fieldType,hint:e.hint,label:e.name,name:e.variable,required:e.required,value:e.defaultValue})},Select:function(e){return h("dot-select",{hint:e.hint,label:e.name,name:e.variable,options:e.values,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},Radio:function(e){return h("dot-radio",{hint:e.hint,label:e.name,name:e.variable,options:e.values,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},Date:function(e){return h("dot-date",{hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},Time:function(e){return h("dot-time",{hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},"Date-and-Time":function(e){return h("dot-date-time",{hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required,value:e.defaultValue})},"Date-Range":function(e){return h("dot-date-range",{hint:e.hint,label:e.name,name:e.variable,required:e.required,value:e.defaultValue})},Tag:function(e){return h("dot-tags",{data:function(){return fetch("/api/v1/tags").then(function(e){return e.json()}).then(function(e){return Object.keys(e)}).catch(function(){return[]})},hint:e.hint,label:e.name,name:e.variable,required:e.required,value:e.defaultValue})},Binary:function(e){return h("dot-binary-file",{accept:getFieldVariableValue(e.fieldVariables,"accept"),"max-file-length":getFieldVariableValue(e.fieldVariables,"maxFileLength"),hint:e.hint,label:e.name,name:e.variable,ref:function(t){setAttributesToTag(t,e.fieldVariables)},required:e.required})}},DOT_ATTR_PREFIX="dot";function setAttributesToTag(e,t){t.forEach(function(t){e.setAttribute(t.key,t.value)})}var pipedValuesToObject=function(e){return isStringType(e)?e.split(",").reduce(function(e,t){var a,r=t.split("|");return Object.assign({},e,((a={})[r[0]]=r[1],a))},{}):null};function isDotAttribute(e){return e.startsWith(DOT_ATTR_PREFIX)}function setDotAttributesToElement(e,t){t.forEach(function(t){var a=t.value;e.setAttribute(t.name.replace(DOT_ATTR_PREFIX,""),a)})}function getDotAttributesFromElement(e,t){var a=t.map(function(e){return e.toUpperCase()});return e.filter(function(e){return!a.includes(e.name.toUpperCase())&&isDotAttribute(e.name)})}var shouldShowField=function(e,t){var a=t?t.split(","):[];return!a.length||a.includes(e.variable)},getFieldVariableValue=function(e,t){var a=e.filter(function(e){return e.key.toUpperCase()===t.toUpperCase()})[0];return a&&a.value},getErrorMessage=function(e){var t=JSON.parse(e);return t.errors.length&&t.errors[0].message?t.errors[0].message:e},getFieldsFromLayout=function(e){return e.reduce(function(e,t){return e.concat.apply(e,t.columns.map(function(e){return e.fields}))},[])},fieldParamsConversionFromBE={"Key-Value":function(e){if(e.defaultValue&&"string"!=typeof e.defaultValue){var t=Object.keys(e.defaultValue).map(function(t){return{key:t,value:e.defaultValue[t]}});e.defaultValue=getStringFromDotKeyArray(t)}return DotFormFields["Key-Value"](e)}},fieldCustomProcess={"DOT-KEY-VALUE":pipedValuesToObject},fieldMap={Time:DotFormFields.Time,Textarea:DotFormFields.Textarea,Text:DotFormFields.Text,Tag:DotFormFields.Tag,Select:DotFormFields.Select,Radio:DotFormFields.Radio,"Multi-Select":DotFormFields["Multi-Select"],"Key-Value":fieldParamsConversionFromBE["Key-Value"],"Date-and-Time":DotFormFields["Date-and-Time"],"Date-Range":DotFormFields["Date-Range"],Date:DotFormFields.Date,Checkbox:DotFormFields.Checkbox,Binary:DotFormFields.Binary};export{getDotAttributesFromElement as a,setDotAttributesToElement as b,DOT_ATTR_PREFIX as c,getErrorMessage as d,getFieldsFromLayout as e,fieldCustomProcess as f,shouldShowField as g,fieldMap as h};