import*as tslib_1 from"../polyfills/tslib.js";import{h}from"../dotcmsfields.core.js";function getClassNames(t,e,r){return{"dot-valid":e,"dot-invalid":!e,"dot-pristine":t.dotPristine,"dot-dirty":!t.dotPristine,"dot-touched":t.dotTouched,"dot-untouched":!t.dotTouched,"dot-required":r}}function isStringType(t){return"string"==typeof t&&!!t}function getDotOptionsFromFieldValue(t){return isStringType(t)&&isKeyPipeValueFormatValid(t=t.replace(/(?:\\[rn]|[\r\n]+)+/g,","))?t.split(",").filter(function(t){return!!t.length}).map(function(t){var e=t.split("|");return{label:e[0],value:e[1]}}):[]}function getErrorClass(t){return t?void 0:"dot-field__error"}function getHintId(t){var e=slugify(t);return e?"hint-"+e:void 0}function getId(t){var e=slugify(t);return t?"dot-"+slugify(e):void 0}function getLabelId(t){var e=slugify(t);return e?"label-"+e:void 0}function getOriginalStatus(t){return{dotValid:void 0===t||t,dotTouched:!1,dotPristine:!0}}function getStringFromDotKeyArray(t){return t.map(function(t){return t.key+"|"+t.value}).join(",")}function updateStatus(t,e){return Object.assign({},t,e)}function getTagError(t,e){return t&&isStringType(e)?h("span",{class:"dot-field__error-message"},e):null}function getTagHint(t){return isStringType(t)?h("span",{class:"dot-field__hint",id:getHintId(t)},t):null}function isValidURL(t){try{return!!new URL(t)}catch(t){return!1}}function isFileAllowed(t,e){var r=e.split(",");r=r.map(function(t){return t.trim()});var i=t?t.substring(t.indexOf("."),t.length):"";return allowAnyFile(r)||r.includes(i)}function allowAnyFile(t){return""===t[0]||t.includes("*")}function slugify(t){return t?t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):null}function isKeyPipeValueFormatValid(t){for(var e=/([^|,]*)\|([^|,]*)/,r=t.split(","),i=!0,a=0,n=r.length;a<n;a++)if(!e.test(r[a])){i=!1;break}return i}var DATE_REGEX=new RegExp("^\\d\\d\\d\\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])"),TIME_REGEX=new RegExp("^(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])$");function dotValidateDate(t){return DATE_REGEX.test(t)?t:null}function dotValidateTime(t){return TIME_REGEX.test(t)?t:null}function dotParseDate(t){var e=t?t.split(" "):"",r=e[0],i=e[1];return{date:dotValidateDate(r),time:dotValidateTime(i)||dotValidateTime(r)}}function isValidDateSlot(t,e){return!!e&&(e.split(" ").length>1?isValidFullDateSlot(t):isValidPartialDateSlot(t))}function isValidFullDateSlot(t){return!!t.date&&!!t.time}function isValidPartialDateSlot(t){return!!t.date||!!t.time}var DotFieldPropError=function(t){function e(e,r){var i=t.call(this,'Warning: Invalid prop "'+e.name+'" of type "'+typeof e.value+'" supplied to "'+e.field.type+'" with the name "'+e.field.name+'", expected "'+r+'".\nDoc Reference: https://github.com/dotCMS/core-web/blob/master/projects/dotcms-field-elements/src/components/'+e.field.type+"/readme.md")||this;return i.propInfo=e,i}return tslib_1.__extends(e,t),e.prototype.getProps=function(){return Object.assign({},this.propInfo)},e}(Error);function stringValidator(t){if("string"!=typeof t.value)throw new DotFieldPropError(t,"string")}function regexValidator(t){try{RegExp(t.value.toString())}catch(e){throw new DotFieldPropError(t,"valid regular expression")}}function numberValidator(t){if(isNaN(Number(t.value)))throw new DotFieldPropError(t,"Number")}function dateValidator(t){if(!dotValidateDate(t.value.toString()))throw new DotFieldPropError(t,"Date")}var areRangeDatesValid=function(t,e,r){if(t>e)throw new DotFieldPropError(r,"Date")};function dateRangeValidator(t){var e=t.value.toString().split(","),r=e[0],i=e[1];if(!dotValidateDate(r)||!dotValidateDate(i))throw new DotFieldPropError(t,"Date");areRangeDatesValid(new Date(r),new Date(i),t)}function timeValidator(t){if(!dotValidateTime(t.value.toString()))throw new DotFieldPropError(t,"Time")}function dateTimeValidator(t){if("string"!=typeof t.value)throw new DotFieldPropError(t,"Date/Time");if(!isValidDateSlot(dotParseDate(t.value),t.value))throw new DotFieldPropError(t,"Date/Time")}var PROP_VALIDATION_HANDLING={date:dateValidator,dateRange:dateRangeValidator,dateTime:dateTimeValidator,number:numberValidator,options:stringValidator,regexCheck:regexValidator,step:stringValidator,string:stringValidator,time:timeValidator,type:stringValidator,accept:stringValidator},FIELDS_DEFAULT_VALUE={options:"",regexCheck:"",value:"",min:"",max:"",step:"",type:"text",accept:null};function validateProp(t,e){t.value&&PROP_VALIDATION_HANDLING[e||t.name](t)}function getPropInfo(t,e){return{value:t[e],name:e,field:{name:t.name,type:t.el.tagName.toLocaleLowerCase()}}}function checkProp(t,e,r){var i=getPropInfo(t,e);try{return validateProp(i,r),t[e]}catch(t){return console.warn(t.message),FIELDS_DEFAULT_VALUE[e]}}export{getOriginalStatus as a,checkProp as b,getClassNames as c,getTagHint as d,getTagError as e,updateStatus as f,isFileAllowed as g,getHintId as h,getErrorClass as i,isValidURL as j,getId as k,getStringFromDotKeyArray as l,isStringType as m,getDotOptionsFromFieldValue as n,dotParseDate as o,getLabelId as p};