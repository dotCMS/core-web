import{h}from"../dotcmsfields.core.js";import{a as Fragment}from"./chunk-1d89c98b.js";import{a as getOriginalStatus,b as checkProp,c as getClassNames,h as getHintId,i as getErrorClass,k as getId,d as getTagHint,e as getTagError,f as updateStatus}from"./chunk-62cd3eff.js";import{a as getDotAttributesFromElement,b as setDotAttributesToElement}from"./chunk-4205a04e.js";var DotTextfieldComponent=function(){function t(){this.value="",this.name="",this.label="",this.placeholder="",this.hint="",this.required=!1,this.requiredMessage="This field is required",this.validationMessage="The field doesn't comply with the specified format",this.disabled=!1,this.regexCheck="",this.type="text"}return t.prototype.reset=function(){this.value="",this.status=getOriginalStatus(this.isValid()),this.emitStatusChange(),this.emitValueChange()},t.prototype.componentWillLoad=function(){this.validateProps(),this.status=getOriginalStatus(this.isValid()),this.emitStatusChange()},t.prototype.componentDidLoad=function(){var t=this,e=this.el.querySelector("input");setTimeout(function(){var i=getDotAttributesFromElement(Array.from(t.el.attributes),[]);setDotAttributesToElement(e,i)},0)},t.prototype.regexCheckWatch=function(){this.regexCheck=checkProp(this,"regexCheck")},t.prototype.typeWatch=function(){this.type=checkProp(this,"type")},t.prototype.hostData=function(){return{class:getClassNames(this.status,this.isValid(),this.required)}},t.prototype.render=function(){var t=this;return h(Fragment,null,h("dot-label",{label:this.label,required:this.required,name:this.name},h("input",{"aria-describedby":getHintId(this.hint),class:getErrorClass(this.status.dotValid),disabled:this.disabled||null,id:getId(this.name),onBlur:function(){return t.blurHandler()},onInput:function(e){return t.setValue(e)},placeholder:this.placeholder,required:this.required||null,type:this.type,value:this.value})),getTagHint(this.hint),getTagError(this.shouldShowErrorMessage(),this.getErrorMessage()))},t.prototype.validateProps=function(){this.regexCheckWatch(),this.typeWatch()},t.prototype.isValid=function(){return!this.isValueRequired()&&this.isRegexValid()},t.prototype.isValueRequired=function(){return this.required&&!this.value},t.prototype.isRegexValid=function(){return!this.regexCheck||!this.value||new RegExp(this.regexCheck).test(this.value)},t.prototype.shouldShowErrorMessage=function(){return this.getErrorMessage()&&!this.status.dotPristine},t.prototype.getErrorMessage=function(){return this.isRegexValid()?this.isValid()?"":this.requiredMessage:this.validationMessage},t.prototype.blurHandler=function(){this.status.dotTouched||(this.status=updateStatus(this.status,{dotTouched:!0}),this.emitStatusChange())},t.prototype.setValue=function(t){this.value=t.target.value.toString(),this.status=updateStatus(this.status,{dotTouched:!0,dotPristine:!1,dotValid:this.isValid()}),this.emitValueChange(),this.emitStatusChange()},t.prototype.emitStatusChange=function(){this.statusChange.emit({name:this.name,status:this.status})},t.prototype.emitValueChange=function(){this.valueChange.emit({name:this.name,value:this.value})},Object.defineProperty(t,"is",{get:function(){return"dot-textfield"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{disabled:{type:Boolean,attr:"disabled",reflectToAttr:!0,mutable:!0},el:{elementRef:!0},hint:{type:String,attr:"hint",reflectToAttr:!0},label:{type:String,attr:"label",reflectToAttr:!0},name:{type:String,attr:"name"},placeholder:{type:String,attr:"placeholder",reflectToAttr:!0,mutable:!0},regexCheck:{type:String,attr:"regex-check",reflectToAttr:!0,mutable:!0,watchCallbacks:["regexCheckWatch"]},required:{type:Boolean,attr:"required",reflectToAttr:!0,mutable:!0},requiredMessage:{type:String,attr:"required-message"},reset:{method:!0},status:{state:!0},type:{type:String,attr:"type",reflectToAttr:!0,mutable:!0,watchCallbacks:["typeWatch"]},validationMessage:{type:String,attr:"validation-message"},value:{type:String,attr:"value",mutable:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"valueChange",method:"valueChange",bubbles:!0,cancelable:!0,composed:!0},{name:"statusChange",method:"statusChange",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"input{outline:none}"},enumerable:!0,configurable:!0}),t}();export{DotTextfieldComponent as DotTextfield};