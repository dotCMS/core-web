(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{722:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"dot_card_view",(function(){return DotCardView}));__webpack_require__(110),__webpack_require__(137),__webpack_require__(40),__webpack_require__(50),__webpack_require__(70),__webpack_require__(59),__webpack_require__(88),__webpack_require__(4),__webpack_require__(5),__webpack_require__(206),__webpack_require__(43),__webpack_require__(71),__webpack_require__(14);var _index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(136);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var getSelecttion=function getSelecttion(items,value){return items&&items.length&&value&&"string"==typeof value?items.filter((function(_ref){var inode=_ref.data.inode;return value.split(",").includes(inode)})).map((function(_ref2){return _ref2.data})):[]},DotCardView=function(){function DotCardView(hostRef){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DotCardView),Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.g)(this,hostRef),this.selected=Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.c)(this,"selected",7),this.cardClick=Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.c)(this,"cardClick",7),this.items=[],this.selection=[]}var _clearValue,_getValue;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DotCardView,[{key:"watchItems",value:function watchItems(newValue){this.selection=getSelecttion(newValue,this.value)}},{key:"watchValue",value:function watchValue(newValue){this.selection=getSelecttion(this.items,newValue)}},{key:"getValue",value:(_getValue=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this.selection);case 1:case"end":return _context.stop()}}),_callee,this)}))),function getValue(){return _getValue.apply(this,arguments)})},{key:"clearValue",value:(_clearValue=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:this.value="",this.getCards().forEach((function(card){card.checked=!1}));case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function clearValue(){return _clearValue.apply(this,arguments)})},{key:"componentDidLoad",value:function componentDidLoad(){this.selection=getSelecttion(this.items,this.value),this.cards=this.getCards()}},{key:"clearMenu",value:function clearMenu(){this.cards.forEach((function(card){card.hideMenu()}))}},{key:"render",value:function render(){var _this=this,value=function getValueAsArray(value){return value&&"string"==typeof value?value.split(","):[]}(this.value);return Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.e)(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.a,null,this.items.map((function(item){return Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.e)("dot-card-contentlet",{onContextMenu:(_onContextMenu=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(e){var target;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:e.preventDefault(),target=e.target,_this.clearMenu(),target.showMenu(e.x,e.y);case 4:case"end":return _context3.stop()}}),_callee3)}))),function onContextMenu(_x){return _onContextMenu.apply(this,arguments)}),onContextMenuClick:function onContextMenuClick(){_this.clearMenu()},onClick:function onClick(){_this.clearMenu(),_this.cardClick.emit(item.data)},key:item.data.inode,checked:value.includes(item.data.inode),onCheckboxChange:function onCheckboxChange(_ref3){var _ref3$detail=_ref3.detail,originalTarget=_ref3$detail.originalTarget,shiftKey=_ref3$detail.shiftKey,inBetween=!1;shiftKey&&originalTarget.checked&&_this.cards.forEach((function(card){card!==originalTarget&&card!==_this.lastChecked||(inBetween=!inBetween),inBetween&&(card.checked=!0,_this.setValue(originalTarget,card.item.data))})),_this.lastChecked=originalTarget,_this.setValue(originalTarget,item.data)},item:item});var _onContextMenu})))}},{key:"setValue",value:function setValue(originalTarget,data){originalTarget.checked?this.selection.push(data):this.selection=this.selection.filter((function(_ref4){return _ref4.identifier!==data.identifier})),this.value=this.selection.map((function(_ref5){return _ref5.inode})).join(","),this.selected.emit(this.selection)}},{key:"getCards",value:function getCards(){return this.el.shadowRoot.querySelectorAll("dot-card-contentlet")}},{key:"el",get:function get(){return Object(_index_92e7b8df_js__WEBPACK_IMPORTED_MODULE_13__.d)(this)}}],[{key:"watchers",get:function get(){return{items:["watchItems"],value:["watchValue"]}}}]),DotCardView}();DotCardView.style=':host{display:grid;grid-template-columns:repeat(auto-fill, minmax(260px, 1fr));grid-gap:var(--basic-padding-2)}dot-card-contentlet{height:100%}dot-card-contentlet:before{content:"";display:inline-block;flex:0 0 0;height:0;padding-bottom:calc(100%)}'}}]);
//# sourceMappingURL=30.32382cb1dd2363169688.bundle.js.map