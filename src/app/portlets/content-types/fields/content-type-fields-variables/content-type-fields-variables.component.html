<form [formGroup]="form" (ngSubmit)="addVariableForm($event)" #formEl="ngForm" (keyup.enter)="formEl.ngSubmit" novalidate>
    <div class="content-type-fields__variables-form">
        <div>
            <label class="form__label">{{ messages['contenttypes.field.variables.key_header.label'] }}</label>
            <input pInputText type="text" formControlName="key"/>
        </div>
        <div>
            <label class="form__label">{{ messages['contenttypes.field.variables.value_header.label'] }}</label>
            <input pInputText type="text" formControlName="value"/>
        </div>
        <button pButton secondary tiny label="Add" (click)="formEl.ngSubmit" [disabled]="!(this.form.value.key.length > 0 && this.form.value.value.length > 0)"></button>
    </div>
</form>

<p-dataTable
    [value]="fieldVariables"
    [editable]="true"
    sortField="clazz"
    sortOrder=0
    >
    <p-column field="key" [header]="messages['contenttypes.field.variables.key_header.label']" [editable]="true"></p-column>
    <p-column field="value" [header]="messages['contenttypes.field.variables.value_header.label']" [editable]="true"></p-column>
    <p-column class="buttons" [header]="messages['contenttypes.field.variables.actions_header.label']" >
        <ng-template let-fieldVar="rowData" let-index="rowIndex" pTemplate="body">
            <dot-icon-button icon="save" (click)="saveVariable(fieldVar, index)" [attr.disabled]="shouldBeDisabled(index) ? true : null"></dot-icon-button>
            <dot-icon-button icon="delete" (click)="deleteVariable(index)"></dot-icon-button>
        </ng-template>
    </p-column>
    <ng-template pTemplate="emptymessage">
        {{ messages['contenttypes.field.variables.value_no_rows.label'] }}
    </ng-template>
</p-dataTable>