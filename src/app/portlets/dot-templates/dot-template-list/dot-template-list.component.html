<dot-listing-data-table
    #listing
    (rowWasClicked)="editTemplate($event)"
    (selectedItems)="updateSelectedTemplates($event)"
    [actionHeaderOptions]="actionHeaderOptions"
    [columns]="tableColumns"
    sortField="modDate"
    sortOrder="DESC"
    url="v1/templates"
    [actions]="[]"
    [checkbox]="true"
    dataKey="inode"
    [firstPageData]="firstPage"
>
    <div>
        <p-checkbox
            label="{{'Show-Archived' | dm}}"
            (onChange)="handleArchivedFilter($event.checked)"
        ></p-checkbox>

        <button type="button"
                pButton
                class="p-button-secondary p-button-sm"
                icon="pi pi-ellipsis-v"
                label="{{ 'Actions' | dm}}"
                (click)="actionsMenu.toggle($event)"></button>
        <p-menu #actionsMenu [popup]="true" [model]="templateBulkActions"></p-menu>

<!--        <dot-action-button-->
<!--            class="action-header__primary-button"-->
<!--            [model]="addOptions"-->
<!--            (click)="handleTest()"-->
<!--        ></dot-action-button>-->

    </div>

    <ng-template #rowTemplate let-rowData="rowData">
        <td [ngStyle]="{ 'text-align': tableColumns[0].textAlign }">
            {{ rowData.name }}
        </td>
        <td [ngStyle]="{ 'text-align': tableColumns[1].textAlign }">
            <span>Status TBD</span>
        </td>
        <td [ngStyle]="{ 'text-align': tableColumns[2].textAlign }">
            {{ rowData.friendlyName }}
        </td>
        <td [ngStyle]="{ 'text-align': tableColumns[3].textAlign }">
            {{ rowData.modDate }}
        </td>
        <td style="width: 5%">
            <dot-action-menu-button
                class="listing-datatable__action-button"
                [actions]="setTemplateActions(rowData)"
                [item]="rowData"
            >
            </dot-action-menu-button>
        </td>
    </ng-template>
</dot-listing-data-table>

<dot-add-to-bundle
    *ngIf="addToBundleIdentifier"
    [assetIdentifier]="addToBundleIdentifier"
    (cancel)="addToBundleIdentifier = null"
></dot-add-to-bundle>
