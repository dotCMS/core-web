<div class="dot-service-integration-configuration__container">
    <div class="dot-service-integration-configuration__header">
        <dot-avatar
            [size]="112"
            [url]="serviceIntegration.iconUrl"
            [label]="serviceIntegration.name"
        ></dot-avatar>
        <div class="dot-service-integration-configuration__data">
            <span class="dot-service-integration-configuration__service-name">
                {{ serviceIntegration.name }}
            </span>
            <div class="dot-service-integration-configuration__service-key">
                {{ messagesKey['service.integration.key'] }}
                <dot-copy-button
                    [copy]="serviceIntegration.key"
                    [label]="serviceIntegration.key"
                ></dot-copy-button>
            </div>
            <span class="dot-service-integration-configuration__configurations"
                >{{
                    serviceIntegration.configurationsCount
                        ? serviceIntegration.configurationsCount +
                          ' ' +
                          messagesKey['service.integration.configurations']
                        : messagesKey['service.integration.no.configurations']
                }}
            </span>
            <div class="dot-service-integration-configuration__description">
                {{ serviceIntegration.description }}
            </div>
        </div>
        <dot-action-button
            class="action-header__primary-button"
            (click)="createConfiguration()"
        ></dot-action-button>
    </div>
    <div class="dot-service-integration-configuration__body">



        <p-virtualScroller
            [value]="lazyCars"
            scrollHeight="300px"
            [itemSize]="66"
            [rows]="200"
            [cache]="true"
            [lazy]="true"
            (onLazyLoad)="loadCarsLazy($event)"
            [totalRecords]="totalLazyCarsLength"
        >
            <p-header>
                List of Cars
            </p-header>
            <ng-template let-car pTemplate="item" let-i="index">
                <div class="ui-g car-item">
                    <div class="ui-g-12 ui-md-2">
                        <div style="font-size: 24px; text-align: center; padding-top: 48px">
                            {{ i }}
                        </div>
                    </div>
                    <div class="ui-g-12 ui-md-2">
                        <img src="assets/showcase/images/demo/car/{{ car?.brand }}.png" />
                    </div>
                    <div class="ui-g-12 ui-md-8">
                        <div class="ui-g">
                            <div class="ui-g-2 ui-sm-6">Vin:</div>
                            <div class="ui-g-10 ui-sm-6">{{ car?.vin }}</div>

                            <div class="ui-g-2 ui-sm-6">Year:</div>
                            <div class="ui-g-10 ui-sm-6">{{ car?.year }}</div>

                            <div class="ui-g-2 ui-sm-6">Brand:</div>
                            <div class="ui-g-10 ui-sm-6">{{ car?.brand }}</div>

                            <div class="ui-g-2 ui-sm-6">Color:</div>
                            <div class="ui-g-10 ui-sm-6">{{ car?.color }}</div>
                        </div>
                    </div>
                </div>
            </ng-template>
            <ng-template let-car pTemplate="loadingItem">
                <div class="ui-g car-item empty-car-item">
                    <div class="ui-g-12 ui-md-2">
                        <div class="empty-car-item-index"></div>
                    </div>
                    <div class="ui-g-12 ui-md-2">
                        <div class="empty-car-item-image"></div>
                    </div>
                    <div class="ui-g-12 ui-md-8">
                        <div class="ui-g">
                            <div class="ui-g-12"><div class="empty-car-item-text"></div></div>
                            <div class="ui-g-12"><div class="empty-car-item-text"></div></div>
                            <div class="ui-g-12"><div class="empty-car-item-text"></div></div>
                            <div class="ui-g-12"><div class="empty-car-item-text"></div></div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </p-virtualScroller>



        <div *ngIf="serviceIntegration.sites && serviceIntegration.sites.length; else noConfigurations">
            <div class="dot-service-integration-configuration__delete_all">
                <button
                    pButton
                    link
                    [label]="messagesKey['service.integration.confirmation.delete.all.button']"
                    icon="fa fa-trash-o"
                    (click)="deleteAllConfigurations()"
                ></button>
            </div>
            <div
                class="dot-service-integration-configuration__item"
                *ngFor="let site of serviceIntegration.sites"
                (click)="editConfiguration($event, site.id)"
            >
                <div class="dot-service-integration-configuration__name">
                    {{ site.name }}
                </div>
                <div class="dot-service-integration-configuration__host-key">
                    {{ messagesKey['service.integration.key'] }} {{ site.id }}
                </div>
                <dot-icon-button
                    icon="delete_outline"
                    (click)="deleteConfiguration($event, site)"
                ></dot-icon-button>
                <dot-icon-button
                    icon="edit"
                    (click)="editConfiguration($event, site.id)"
                ></dot-icon-button>
            </div>
        </div>

        <ng-template #noConfigurations>
            <div class="dot-service-integration-configuration__add-configurations">
                <div class="dot-service-integration-configuration__add-configurations-title">
                    {{ messagesKey['service.integration.add.configurations'] }}
                </div>
                <p class="dot-service-integration-configuration__add-configurations-description">
                    {{ messagesKey['service.integration.no.configurations.message'] }}
                </p>
                <button
                    pButton
                    secondary
                    [label]="messagesKey['service.integration.add.configurations.button']"
                    (click)="createConfiguration()"
                ></button>
            </div>
        </ng-template>
    </div>
</div>
